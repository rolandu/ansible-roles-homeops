---
- name: Ensure VPN definitions are provided
  assert:
    that:
      - openvpn_config is defined
      - (openvpn_config | default([])) | length > 0
    fail_msg: "Set openvpn_config to the list of VPN definitions."

- name: Configure OpenVPN client per VPN
  include_tasks: configure_server.yml
  loop: "{{ openvpn_config }}"
  loop_control:
    loop_var: ovpn_server
